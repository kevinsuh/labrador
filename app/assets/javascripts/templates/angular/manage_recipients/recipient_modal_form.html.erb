<form ng-submit="submit()">

	<!-- name / relationship -->
	<div class="modal-header family">
		<div class="body">
			<div class="row recipient_info">
				<div class="profile_picture_container">
					<div class="profile_picture">
						<img ng-if="uploader.queue.length == 0" class="image" ng-src="{{recipient.profile_picture || photo}}" />
						<div ng-repeat="item in uploader.queue">
							<div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 120, class:'image' }"></div>
						</div>
					</div>
					<input class="picture_upload" type="file" nv-file-select uploader="uploader" id="helloworld"/>
				</div>
				
				<div class="basic_info">
					<div class="name form_field">
						<div class="first_name">
							<div class="form_input">
					      <input ng-model="recipient.first_name" type="text" placeholder="First Name"/>
					    </div>
						</div>

						<div class="last_name">
							<div class="form_input">
					      <input ng-model="recipient.last_name" type="text" placeholder="Last Name"/>
					    </div>
						</div>

					</div>

					<div class="relationship form_field">
						<div class="relationship">

							<div class="relationship_input form_input">
								<select ng-model="recipient.relationship.id" ng-options="value as key for (key, value) in relationships"></select>
								
							</div>

							<!-- this is the grouping color -->
							<!-- <div class="group_input form_input">
								<select ng-model="recipient.first_name">
						  		<option value="">O</option>
						  		<% us_states.each { |state, abrv| %>
						  			<option value="<%= state %>"><%= abrv %></option>
									<% } %>
						  	</select>
							</div> -->

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- address + events -->
	<div class="modal-body modal_body">
		<div class="body">
			<div class="row address_title">
				<h3 class="modal_title">Address</h3>
				<h6 ng-if="recipient.id" class="last_updated">Last Updated: {{recipient.primary_address.updated_at | date:'MM/dd/yy'}}</h6>
				<hr>
			</div>
			<div class="row address">
				<div class="street form_field">
					<div class="street">
						<div class="form_input">
				      <input ng-model="recipient.primary_address.street" type="text" placeholder="Street"/>
				    </div>
					</div>
				</div>

				<div class="address_other form_field">
					<div class="city">
						<div class="form_input">
				      <input ng-model="recipient.primary_address.city" type="text" placeholder="City"/>
				    </div>
					</div>

					<div class="state">
						<div class="form_input">
							<select ng-model="recipient.primary_address.state">
					  		<option value="">State</option>
					  		<% us_states.each { |state, abrv| %>
					  			<option value="<%= state %>"><%= abrv %></option>
								<% } %>
					  	</select>
						</div>
					</div>

					<div class="zip">
						<div class="form_input">
				      <input ng-model="recipient.primary_address.zipcode" type="text" placeholder="Zip"/>
				    </div>
					</div>

					<div class="country">
						<div class="form_input">
							<country-select data-ng-model="recipient.primary_address.country"></country-select>
						</div>
					</div>

				</div>
			</div>

			<div class="row events_title">
				<h3 class="modal_title">Events</h3>
				<hr>
			</div>

			<div class="row events" ng-repeat="occasion_hash in recipient.occasions" ng-controller="recipientOccasionsCtrl">
				<div class="events form_field">
					<div class="occasion">
						<div class="occasion_input form_input">
							<select ng-model="occasion_hash.recipient_occasion.occasion_id" ng-options="value as key for (key, value) in occasions"></select>
						</div>
					</div>

					<div class="date" ng-controller="DatepickerDemoCtrl">
						<div class="form_input date_input">
							<input type="date" datepicker-popup json-date ng-model="occasion_hash.recipient_occasion.occasion_date" is-open="status.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" placeholder="mm/dd/yyyy"/>
						</div>
						<div class="form_input date_button">
							<span class="input-group-btn date_span">
                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </div>
					</div>

					<% if false %>
					<div class="month">
						<div class="form_input">
							<select ng-model="user.first_name">
					  		<option value="">Month</option>
					  		<% us_states.each { |state, abrv| %>
					  			<option value="<%= state %>"><%= abrv %></option>
								<% } %>
					  	</select>
						</div>
					</div>

					<div class="day">
						<div class="form_input">
				      <input ng-model="user.first_name" type="text" placeholder="Day"/>
				    </div>
					</div>

					<div class="year">
						<div class="form_input">
							<select ng-model="user.first_name">
					  		<option value="user.first_name">Year</option>
					  		<% us_states.each { |state, abrv| %>
					  			<option value="<%= state %>"><%= abrv %></option>
								<% } %>
					  	</select>
						</div>
					</div>
					<% end %>
				</div>
			</div>
			<div class="row add_new_event">
				<span style="color:red; cursor: pointer;" ng-click="newOccasion()">+ Add New Event</span>
			</div>
		</div>
	</div>
</form>
<div class="modal-footer">
	<button class="cancel-btn btn" ng-click="cancel()">Cancel</button>				
  <button class="submit-btn btn" ng-click="submit()">Save</button>
</div>
