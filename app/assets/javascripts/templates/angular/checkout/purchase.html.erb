<div class="payment_div">

	<div class="user_information">
		<div class="shipping">

			<div class="header">
				<h6 class="header_title">Step 1: Shipping Info</h6>
			</div>
			<hr class="border_line">

			<div class="selected_address" ng-show="viewSelectedAddress">
				<!-- address info -->
				<div class="address_info selected">
					<div class="name detail">
						{{finalOptions.address.first_name}} {{finalOptions.address.last_name}}
					</div>
					<div class="street detail">
						{{finalOptions.address.street}}
						<div class="singleAddressOptions link_options">
							 <a class="link_option" ng-click="editAddress(finalOptions.address)">edit</a> / <a ng-click="displayAddressList()" class="link_option">change</a>
						</div>
					</div>
					<div class="street_two detail">
						{{finalOptions.address.city}}, {{finalOptions.address.state | stateAbbreviation}} {{finalOptions.address.zipcode}}
					</div>
				</div>
			</div>

			<div class="addresses" ng-controller="SingleAddressController">

				<!-- address info -->
				<div class="address_info" ng-repeat="address in user.addresses" ng-show="viewAddressList" ng-class="{'selected': address.id == selectedAddress.id}" ng-click="selectedAddress.id = address.id">
					<div class="selectAddressSection">
						<input ng-model="selectedAddress.id" value="{{address.id}}" type="radio" name="single_address"/>
					</div>
					<div class="detailsSection">
						<div class="name detail">
							{{address.first_name}} {{address.last_name}}
						</div>
						<div class="street detail">
							{{address.street}}
							<div class="link_options singleAddressOptions" ng-show="selectedAddress.id == address.id">
								 <a class="link_option" ng-click="editAddress(address)">edit</a> / <a ng-click="chooseAddress(address)" class="link_option">use</a>
							</div>
						</div>
						<div class="street_two detail">
							{{address.city}}, {{address.state | stateAbbreviation}} {{address.zipcode}}
						</div>
					</div>
					
				</div>

				<!-- option for new address to append to this list -->
				<div class="new_address_option" ng-show="viewAddressList">
					<div class="link_options">
						<a class="link_option" ng-click="newAddress()">add new shipping address</a>
					</div>
				</div>

				<div class="new_address_form" ng-show="viewNewAddressForm">
				</div>
					
				<!-- update address form -->
				<div class="address_form" ng-show="viewEditAddressForm">
					<div class="name form_field">
						<div class="name">
							<div class="form_input first_name">
					      <input ng-model="editingAddress.first_name" type="text" placeholder="First Name"/>
					    </div>
					    <div class="form_input last_name">
					      <input ng-model="editingAddress.last_name" type="text" placeholder="Last Name"/>
					    </div>
						</div>
					</div>

					<div class="street form_field">
						<div class="street">
							<div class="form_input">
					      <input ng-model="editingAddress.street" type="text" placeholder="Street"/>
					    </div>
						</div>
					</div>

					<div class="address_other form_field">
						<div class="city">
							<div class="form_input">
					      <input ng-model="editingAddress.city" type="text" placeholder="City"/>
					    </div>
						</div>

						<div class="state">
							<div class="form_input">
								<select ng-model="editingAddress.state">
						  		<option value="">State</option>
						  		<% us_states.each { |state, abrv| %>
						  			<option value="<%= state %>"><%= abrv %></option>
									<% } %>
						  	</select>
							</div>
						</div>

						<div class="zip">
							<div class="form_input">
					      <input ng-model="editingAddress.zipcode" type="text" placeholder="Zip"/>
					    </div>
						</div>

						<div class="country">
							<div class="form_input">
								<country-select data-ng-model="editingAddress.country"></country-select>
							</div>
						</div>
					</div>

					<div class="options form_field">
						<div class="options">
							<div class="form_input is_primary">
					      <input id="is_primary_{{$index}}" class="checkbox" ng-model="editingAddress.is_primary" type="checkbox"/><label for="is_primary_{{$index}}">Default shipping address</label>
					    </div>
						</div>
					</div>

					<div class="actions form_field">
						<div class="button_box">
							<button class="card_button shipping_button cancel" ng-click="cancelSave()">CANCEL</button>
							<button class="card_button shipping_button save" ng-click="updateAddress()">SAVE</button>
						</div>
					</div>

				</div>
			
			</div>
		</div>

		<div class="payment">
			<div class="header">
				<h6 class="header_title">Payment Method</h6>
			</div>
			<hr>
		</div>
		

	</div>

</div>