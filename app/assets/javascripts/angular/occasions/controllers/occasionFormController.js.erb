(function() {

	angular.module('card-queue').controller("OccasionFormController", function($rootScope, $scope, recipients, cards, FileUploader)
    {

		// pre-fill for EXISTING OCCASIONS
		// $scope.$watch('occasionHash.recipient_occasion.occasion_id', function(newValue, oldValue){
  //     occasionID = newValue;

  //     if ($scope.occasionHash) {
  //     	suggested_date = getDefaultDateForOccasionID(occasionID);

	 //      // ONLY IF THIS OCCASION HAS NOT ALREADY BEEN SAVED
	 //      if (!$scope.occasionHash.recipient_occasion.month || (newValue != oldValue)) {
	 //      	$scope.occasionHash.recipient_occasion.month = suggested_date.month;
	 //      }

	 //      if (!$scope.occasionHash.recipient_occasion.day || (newValue != oldValue)) {
	 //      	$scope.occasionHash.recipient_occasion.day = suggested_date.day;
	 //      }	
  //     }
			
  //    });


		// pre-fill for NEW OCCASION
		$scope.$watch('selectedOccasion.occasion_id', function(newValue, oldValue){
      occasionID = newValue;

			suggested_date = getDefaultDateForOccasionID(occasionID);

      // ONLY IF THIS OCCASION HAS NOT ALREADY BEEN SAVED
      if (!$scope.selectedOccasion.month || (newValue != oldValue)) {
      	$scope.selectedOccasion.month = suggested_date.month;
      }

      if (!$scope.selectedOccasion.day || (newValue != oldValue)) {
      	$scope.selectedOccasion.day = suggested_date.day;
      }


     });

	});

})();


